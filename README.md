# 📚 DatasetMaker — генерация обучающих данных из обычного текста

Программа автоматически превращает обычный текстовый файл (например, инструкцию, статью или документ) в структурированный JSON-датасет для тюнинга языковых моделей Gemini от Google.

## 🚀 Возможности

- Разделение текста на логические блоки (по абзацам)
- Генерация краткого пересказа каждого блока с помощью Gemini
- Поддержка обработки ошибок 429 (превышение лимита запросов к модели)
- Автоматическое ожидание допуска модели, если достигнут лимит запросов
- Поддержка кодировок UTF-8 и CP1251
- Сохранение результата в `dataset.json` в формате:
  ```json
  {
    "text_input": "Оригинальный текст блока",
    "output": "Краткий пересказ"
  }
  ```

## 🛠️ Установка и запуск

1. Установи зависимости:
   ```bash
   pip install google-generativeai
   ```

2. Создай переменную среды PVY_GEMINI_API_KEY с API-ключем Gemini или создай файл `config.json` по пути `C:\Temp\Special\config.json` с содержимым:
   ```json
   {
     "PVY_GEMINI_API_KEY": "твой_API_ключ_от_Gemini"
   }
   ```

3. Помести исходный текст в файл `instruction.txt`.

4. Запусти скрипт:
   ```bash
   python convert_to_dataset.py
   ```

## 📁 Результат

После выполнения будет создан файл `dataset.json` в том же каталоге.

## ⚠️ Важно

- При превышении лимита запросов к Gemini (ошибка 429) скрипт автоматически ждёт рекомендованное время перед повторной попыткой.
- Текст должен быть разбит на логические блоки с помощью двойного перевода строки (`\n\n`), чтобы фрагменты были осмысленными.